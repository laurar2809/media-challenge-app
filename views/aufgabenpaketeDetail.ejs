<% pageTitle=aufgabenpaket.title %>

  <div class="card">
    <div class="navbar card-header bg-primary text-white">
      <div class="d-flex justify-content-between align-categories-center">
        <h2 class="h4 m-0">
          <%= aufgabenpaket.title %>
        </h2>
      </div>
    </div>

    <div class="card-body">
      <!-- Icon/Image -->
      <% if (aufgabenpaket.icon && aufgabenpaket.icon.startsWith('/uploads/')) { %>
        <!-- ECHTES HOCHGELADENES BILD -->
        <div class="text-center mb-4">
          <img src="<%= aufgabenpaket.icon %>" class="img-fluid rounded" style="max-height: 200px;">
        </div>
        <% } else if (aufgabenpaket.icon && (aufgabenpaket.icon.startsWith('http') ||
          aufgabenpaket.icon.startsWith('data:'))) { %>
          <!-- EXTERNE URL ODER DATA-URI -->
          <div class="text-center mb-4">
            <img src="<%= aufgabenpaket.icon %>" class="img-fluid rounded" style="max-height: 200px;">
          </div>
          <% } else if (aufgabenpaket.icon) { %>
            <!-- EMOJI -->
            <div class="text-center mb-4">
              <span class="display-1">
                <%= aufgabenpaket.icon %>
              </span>
            </div>
            <% } else { %>
              <!-- FALLBACK: ASSETS FILE-IMAGE.SVG -->
              <div class="text-center mb-4 text-muted">
                <img src="/assets/file-image.svg" class="img-fluid rounded" style="max-height: 200px; opacity: 0.5;">
                <p class="small mt-2">Kein Bild vorhanden</p>
              </div>
              <% } %>


                <!-- Beschreibung -->
                <div class="mb-4">
                  <h5 class="text-muted">Beschreibung</h5>
                  <p class="fs-6">
                    <%= aufgabenpaket.description %>
                  </p>
                </div>

                <!-- Metadaten -->
                <div class="row text-muted small">
                  <div class="col-md-6">
                    <strong>Erstellt:</strong>
                    <%= aufgabenpaket.created_at ? new Date(aufgabenpaket.created_at).toLocaleDateString('de-DE')
                      : 'Unbekannt' %>
                  </div>
                  <div class="col-md-6">
                    <strong>Geändert:</strong>
                    <%= aufgabenpaket.updated_at ? new Date(aufgabenpaket.updated_at).toLocaleDateString('de-DE')
                      : 'Unbekannt' %>
                  </div>
                </div>
    </div>

    <div class="card-footer">
      <div class="d-flex gap-2">
        <a href="/aufgabenpakete/<%= aufgabenpaket.id %>/edit" class="btn btn-custom-safe">Bearbeiten</a>
        <a href="/aufgabenpakete" class="btn btn-outline-secondary">← Zurück zur Übersicht</a>
      </div>
    </div>
  </div>